• 无法直接在根目录写入文件（当前环境只读），先把接口对齐文档内容整理如下，你可将其保存为根目录 API_DATA_MAPPING.md：

  ———

  # 调度算法对接说明（现有接口与 input.json 映射）

  ## 1. input.json 结构概览

  - config.work_calendar: 起始日期、工作时段、节假日。
  - config.resources: crews(班组)、machines(设备)、part_stations(部装工位)、final_stations(总装工位)。
  - resources.teams[]: 班组编码、名称、能力列表（能力编码）。
  - 后续应还有订单/工序/工位分配等（示例截断）。

  ## 2. 现有后端数据与接口

  基础类型可参考 frontend/src/config/dictionaries.ts（工位类型、订单类型、状态等），后端接口在 backend/src/routes/*.js。

  ### 2.1 生产拆分/任务

  - GET /api/production-tasks/with-schedule?
    status=1&current=&pageSize=&orderCode=&productCode=&deadlineStart=&deadlineEnd=
      - 返回任务 + 订单 + 产品 + steps（拆分步骤，含产品）+ 产品的 routings（含 processes）。
      - 任务状态：0 待拆分，1 已拆分。
  - GET /api/schedules/:taskId：按任务取拆分步骤。
  - POST/DELETE /api/schedules/:taskId：保存/清空拆分（不建议算法阶段改动）。

  数据模型（prisma ProductionTask + ScheduleStep）：

  - Task: code, orderId, productId, deadline, status, priority, steps.
  - Step: type(0=舱段/部装，1=总装)，productId，seq。

  ### 2.2 订单/产品/工艺

  - GET /api/orders：订单，字段含 code/name/type/status/productId/quantity/deadline/scheduledQuantity。
  - GET /api/products：产品。
  - GET /api/products/:id/routings：产品关联的工艺路线（含工序 processes[seq,code,name]）。
  - POST /api/products/:id/routings：配置产品-路线关系。

  ### 2.3 资源（人、设备、工位）

  - GET /api/teams：班组（含 code/name，如需能力需扩展；当前无“能力列表”字段，与 input.json 的 capabilities 编码不直接对
    应）。
  - GET /api/devices：设备列表（可映射 machines）。
  - GET /api/stations：工位，type 0=部装，1=总装，2=测试；可映射 part_stations/final_stations。
  - 其他：/api/staffs 人员，/api/production-lines 产线。

  ### 2.4 工作日历

  - GET /api/calendar（calendarRoutes.js）：日历事件（节假日/调休），配合常量 FACTORY_WORK_HOURS(16 小时两班)。
  - 当前未提供“每日班次时间段”接口；input.json 的 start_hour/upstart_time... 需补充接口或用常量。

  ## 3. input.json 字段与现有数据的对齐评估

  | input.json | 可映射接口/字段 | 现状 | 差距/建议 |
  | --- | --- | --- | --- |
  | work_calendar.start_date/holidays | /api/calendar + 常量 | 有日历事件；工时常量固定16h，两班 | 需新增接口返回工作时
  段，或前端/算法内置常量 |
  | resources.crews | /api/teams | 有班组名称/编码 | 无“能力列表”字段，需扩展或用占位 |
  | resources.machines | /api/devices | 有设备列表 | 能力/类型映射需定义规则 |
  | part_stations/final_stations | /api/stations?type=0/1 | 有工位类型 | 命名需转换 |
  | teams[].capabilities | 无直接字段 | 现有 Team 无能力列表；Process/Station 有类型但无“P?-?-?”编码 | 需设计能力编码或
  映射规则 |
  | 任务/拆分/产品 | /api/production-tasks/with-schedule | 已包含 steps 与产品工艺路线 | 可直接作为算法订单/工序结构的输
  入 |
  | 工艺路线与工序 | /api/products/:id/routings (已包含 processes) | 数据齐备（示例返回 HFBSAIUF 等） | 若算法需所有路
  由，可能要多条路由合并策略 |

  ## 4. 结论

  - 生产任务 + 拆分 + 产品工艺：已有完整数据接口，可直接作为算法的“订单+工序”输入。
  - 设备/工位：有基础列表，但缺少“能力”与算法中的工序编码映射，需要补充能力规则或字典。
  - 班组能力：现接口缺失能力列表，需新增字段/接口或通过工序-工位-班组的规则派生。
  - 工作日历工时段：有日历事件，但缺少“每日班次时间段”接口；可新增返回 upstart_time/upend_time...，或在算法侧使用常量。
  - 订单类型文案已统一为“试制订单”。